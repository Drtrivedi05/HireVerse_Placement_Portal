{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aptitude Test | HireVerse</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body { background:#f8f9fa; font-family:Poppins,sans-serif; overflow:hidden; }
    .test-header {
      background:#0d6efd; color:#fff; padding:1rem 2rem;
      display:flex; justify-content:space-between; align-items:center;
      box-shadow:0 2px 5px rgba(0,0,0,0.1);
    }
    .test-header h5 { margin:0; font-weight:600; }
    .timer {
      background:#fff; color:#0d6efd; font-weight:600;
      padding:0.5rem 1rem; border-radius:8px;
    }
    .main-area {
      display:flex; height:calc(100vh - 120px);
    }
    .question-area {
      flex:3; background:#fff; margin:1rem; border-radius:12px;
      box-shadow:0 2px 8px rgba(0,0,0,0.08); padding:2rem; overflow-y:auto;
    }
    .question-area h5 { font-weight:600; color:#0d6efd; }
    .options label { display:block; background:#f7f9fc; padding:0.75rem 1rem;
      border-radius:8px; margin-bottom:0.75rem; cursor:pointer;
      transition:0.2s ease-in-out;
    }
    .options input[type="radio"] { margin-right:10px; }
    .options label:hover { background:#e9f2ff; }
    .question-palette {
      flex:1; background:#fff; margin:1rem 1rem 1rem 0;
      border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.08);
      padding:1rem; overflow-y:auto;
    }
    .question-palette h6 { color:#0d6efd; font-weight:600; margin-bottom:1rem; }
    .question-number {
      width:40px; height:40px; margin:5px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      font-weight:500; cursor:pointer; color:#fff; transition:0.2s;
    }
    .answered { background:#198754; }
    .not-answered { background:#0d6efd; }
    .flagged { background:#ffc107; color:#000; }
    .not-visited { background:#6c757d; }
    .active-question { outline:3px solid #0d6efd; }
    .footer-nav {
      background:#fff; padding:1rem 2rem; display:flex; justify-content:space-between;
      box-shadow:0 -2px 8px rgba(0,0,0,0.05);
    }
    .legend div {
      display:inline-flex; align-items:center; gap:0.5rem;
      margin-right:1rem; font-size:0.9rem;
    }
    .legend span {
      display:inline-block; width:15px; height:15px; border-radius:50%;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <div class="test-header">
    <div>
      <h5>Google - Software Engineer Aptitude Test</h5>
    </div>
    <div class="timer">
      <i class="bi bi-clock"></i> Time Left: <span id="timer">59:59</span>
    </div>
  </div>

  <!-- Main Body -->
  <div class="main-area">
    <!-- Question Section -->
    <div class="question-area">
      <h5 id="question-title"></h5>
      <p id="question-text" class="mt-3"></p>
      <div class="options mt-4" id="options-container"></div>
    </div>

    <!-- Sidebar -->
    <div class="question-palette">
      <h6><i class="bi bi-grid"></i> Question Palette</h6>
      <div id="palette" class="d-flex flex-wrap"></div>

      <hr>
      <div class="legend mt-3">
        <div><span style="background:#198754;"></span> Answered</div>
        <div><span style="background:#0d6efd;"></span> Not Answered</div>
        <div><span style="background:#ffc107;"></span> Flagged</div>
        <div><span style="background:#6c757d;"></span> Not Visited</div>
      </div>
    </div>
  </div>

  <!-- Footer Navigation -->
  <div class="footer-nav">
    <button class="btn btn-outline-primary" id="prevBtn"><i class="bi bi-arrow-left"></i> Previous</button>
    <div>
      <button class="btn btn-warning me-2" id="flagBtn"><i class="bi bi-flag"></i> Flag</button>
      <button class="btn btn-primary" id="nextBtn">Next <i class="bi bi-arrow-right"></i></button>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // --- Dummy Question Data ---
    const questions = [
      { q: "What is the output of 2 + 3 * 4?", options: ["20", "14", "10", "12"], answer: 1 },
      { q: "Which data structure uses LIFO?", options: ["Queue", "Array", "Stack", "Tree"], answer: 2 },
      { q: "Which planet is known as the Red Planet?", options: ["Mars", "Venus", "Jupiter", "Earth"], answer: 0 },
      { q: "Find the missing number: 2, 4, 8, 16, ?", options: ["18", "24", "32", "36"], answer: 2 },
      { q: "Synonym of 'Rapid'?", options: ["Slow", "Quick", "Lazy", "Steady"], answer: 1 },
      { q: "Which gas is essential for respiration?", options: ["Nitrogen", "Carbon Dioxide", "Oxygen", "Hydrogen"], answer: 2 },
      { q: "Simplify: 25% of 200 is?", options: ["25", "50", "75", "100"], answer: 1 },
      { q: "Which language runs in a web browser?", options: ["Python", "JavaScript", "C++", "Java"], answer: 1 },
      { q: "What is the capital of France?", options: ["Berlin", "Madrid", "Paris", "Rome"], answer: 2 },
      { q: "Opposite of 'Transparent'?", options: ["Opaque", "Clear", "Translucent", "Light"], answer: 0 },
      { q: "Solve: 15 * 6 = ?", options: ["80", "75", "90", "100"], answer: 2 },
      { q: "Which company created the Android OS?", options: ["Apple", "Google", "Microsoft", "Samsung"], answer: 1 },
      { q: "Which shape has 4 equal sides?", options: ["Rectangle", "Triangle", "Square", "Circle"], answer: 2 },
      { q: "Which of these is not a programming language?", options: ["Python", "HTML", "C", "Java"], answer: 1 },
      { q: "Find the odd one out: Apple, Mango, Banana, Carrot", options: ["Apple", "Mango", "Banana", "Carrot"], answer: 3 },
      { q: "What comes next: A, C, E, G, ?", options: ["H", "I", "J", "K"], answer: 1 },
      { q: "Which is a prime number?", options: ["4", "6", "9", "7"], answer: 3 },
      { q: "Speed = Distance / ?", options: ["Time", "Mass", "Force", "Velocity"], answer: 0 },
      { q: "Which device displays output?", options: ["Monitor", "Mouse", "Keyboard", "Scanner"], answer: 0 },
      { q: "Which is a renewable source of energy?", options: ["Coal", "Petrol", "Wind", "Natural Gas"], answer: 2 },
    ];

    // --- State Variables ---
    let currentIndex = 0;
    let answers = Array(questions.length).fill(null);
    let flags = Array(questions.length).fill(false);
    let visited = Array(questions.length).fill(false);

    // --- DOM Elements ---
    const qTitle = document.getElementById("question-title");
    const qText = document.getElementById("question-text");
    const optionsContainer = document.getElementById("options-container");
    const palette = document.getElementById("palette");

    // --- Initialize Palette ---
    questions.forEach((_, i) => {
      const btn = document.createElement("div");
      btn.className = "question-number not-visited";
      btn.textContent = i + 1;
      btn.onclick = () => loadQuestion(i);
      palette.appendChild(btn);
    });

    function updatePalette() {
      [...palette.children].forEach((btn, i) => {
        btn.className = "question-number " + (
          answers[i] !== null ? "answered" :
          flags[i] ? "flagged" :
          visited[i] ? "not-answered" : "not-visited"
        );
        if (i === currentIndex) btn.classList.add("active-question");
      });
    }

    // --- Load Question ---
    function loadQuestion(index) {
      currentIndex = index;
      visited[index] = true;
      const q = questions[index];
      qTitle.textContent = `Question ${index + 1}`;
      qText.textContent = q.q;

      optionsContainer.innerHTML = "";
      q.options.forEach((opt, i) => {
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type = "radio";
        input.name = "q";
        input.value = i;
        if (answers[index] === i) input.checked = true;
        input.onchange = () => {
          answers[index] = i;
          updatePalette();
        };
        label.appendChild(input);
        label.appendChild(document.createTextNode(opt));
        optionsContainer.appendChild(label);
      });
      updatePalette();
    }

    // --- Navigation Buttons ---
    document.getElementById("nextBtn").onclick = () => {
      if (currentIndex < questions.length - 1) loadQuestion(currentIndex + 1);
    };
    document.getElementById("prevBtn").onclick = () => {
      if (currentIndex > 0) loadQuestion(currentIndex - 1);
    };
    document.getElementById("flagBtn").onclick = () => {
      flags[currentIndex] = !flags[currentIndex];
      updatePalette();
    };

    // --- Timer ---
    let timeLeft = 3599;
    const timerDisplay = document.getElementById("timer");
    setInterval(() => {
      const mins = String(Math.floor(timeLeft / 60)).padStart(2, "0");
      const secs = String(timeLeft % 60).padStart(2, "0");
      timerDisplay.textContent = `${mins}:${secs}`;
      if (timeLeft > 0) timeLeft--;
    }, 1000);

    // --- Initialize ---
    loadQuestion(0);
  </script>
</body>
</html>
